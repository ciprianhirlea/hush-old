function Currency(e){this.currency=e,this.toNumber=function(e){return this.isNumeric(e)?parseFloat(e):gformCleanNumber(e,this.currency.symbol_right,this.currency.symbol_left,this.currency.decimal_separator)},this.toMoney=function(e){if(this.isNumeric(e)||(e=this.toNumber(e)),e===!1)return"";e+="",negative="","-"==e[0]&&(negative="-",e=parseFloat(e.substr(1))),money=this.numberFormat(e,this.currency.decimals,this.currency.decimal_separator,this.currency.thousand_separator);var r=this.currency.symbol_left?this.currency.symbol_left+this.currency.symbol_padding:"",t=this.currency.symbol_right?this.currency.symbol_padding+this.currency.symbol_right:"";return money=negative+this.htmlDecode(r)+money+this.htmlDecode(t)},this.numberFormat=function(e,r,t,i,n){var n="undefined"==typeof n;e=(e+"").replace(",","").replace(" ","");var o=isFinite(+e)?+e:0,a=isFinite(+r)?Math.abs(r):0,l="undefined"==typeof i?",":i,c="undefined"==typeof t?".":t,u="",f=function(e,r){var t=Math.pow(10,r);return""+Math.round(e*t)/t};return u="0"==r?(""+Math.round(o)).split("."):-1==r?(""+o).split("."):f(o,a).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,l)),n&&(u[1]||"").length<a&&(u[1]=u[1]||"",u[1]+=new Array(a-u[1].length+1).join("0")),u.join(c)},this.isNumeric=function(e){return gformIsNumber(e)},this.htmlDecode=function(e){var r,t,i=e,n=i.match(/&#[0-9]{1,5};/g);if(null!=n)for(var o=0;o<n.length;o++)t=n[o],r=t.substring(2,t.length-1),i=r>=-32768&&65535>=r?i.replace(t,String.fromCharCode(r)):i.replace(t,"");return i}}function gformCleanNumber(e,r,t,i){e+=" ",e=e.replace(/&.*?;/,"",e),e=e.replace(r,""),e=e.replace(t,"");for(var n="",o=!1,a=0;a<e.length;a++){var l=e.substr(a,1);parseInt(l)>=0&&parseInt(l)<=9||l==i?n+=l:"-"==l&&(o=!0)}for(var c="",a=0;a<n.length;a++){var u=n.substr(a,1);u>="0"&&"9">=u?c+=u:u==i&&(c+=".")}return o&&(c="-"+c),gformIsNumber(c)?parseFloat(c):!1}function gformIsNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function gformIsNumeric(e,r){switch(r){case"decimal_dot":var t=new RegExp("^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:.[0-9]+)?)$");return t.test(e);case"decimal_comma":var t=new RegExp("^(-?[0-9]{1,3}(?:.?[0-9]{3})*(?:,[0-9]+)?)$");return t.test(e)}return!1}function gformDeleteUploadedFile(e,r){var t=jQuery("#field_"+e+"_"+r);t.find(".ginput_preview").hide(),t.find('input[type="file"]').removeClass("gform_hidden"),t.find(".ginput_post_image_file").show(),t.find('input[type="text"]').val("");var i=jQuery.secureEvalJSON(jQuery("#gform_uploaded_files_"+e).val());i&&(i["input_"+r]=null,jQuery("#gform_uploaded_files_"+e).val(jQuery.toJSON(i)))}function gformIsHidden(e){return"none"==e.parents(".gfield").not(".gfield_hidden_product").css("display")}function gformCalculateTotalPrice(e){if(_gformPriceFields[e]){var r=0;_anyProductSelected=!1;for(var t=0;t<_gformPriceFields[e].length;t++)r+=gformCalculateProductPrice(e,_gformPriceFields[e][t]);if(_anyProductSelected){var i=gformGetShippingPrice(e);r+=i}window.gform_product_total&&(r=window.gform_product_total(e,r));var n=jQuery(".ginput_total_"+e);n.length>0&&(n.next().val(r),n.html(gformFormatMoney(r)))}}function gformGetShippingPrice(e){var r=jQuery(".gfield_shipping_"+e+' input[type="hidden"], .gfield_shipping_'+e+" select, .gfield_shipping_"+e+" input:checked"),t=0;return 1!=r.length||gformIsHidden(r)||(t=r.attr("type")&&"hidden"==r.attr("type").toLowerCase()?r.val():gformGetPrice(r.val())),gformToNumber(t)}function gformGetFieldId(e){var r=jQuery(e).attr("id"),t=r.split("_");if(t.length<=0)return 0;var i=t[t.length-1];return i}function gformCalculateProductPrice(e,r){var t=gformGetBasePrice(e,r),i="_"+e+"_"+r;jQuery(".gfield_option"+i+", .gfield_shipping_"+e).find("select").each(function(){var r=gformGetPrice(jQuery(this).val()),t=gformGetFieldId(this);jQuery(this).children("option").each(function(){var i=gformGetOptionLabel(this,jQuery(this).val(),r,e,t);jQuery(this).html(i)})}),jQuery(".gfield_option"+i).find(".gfield_checkbox").find("input").each(function(){var r=gformGetFieldId(jQuery(this).parents(".gfield_checkbox")),t=jQuery(this).next(),i=gformGetOptionLabel(t,jQuery(this).val(),0,e,r);t.html(i)}),jQuery(".gfield_option"+i+", .gfield_shipping_"+e).find(".gfield_radio").each(function(){var r=0,t=jQuery(this).find("input:checked").val(),i=gformGetFieldId(this);t&&(r=gformGetPrice(t)),jQuery(this).find("input").each(function(){var t=jQuery(this).next(),n=gformGetOptionLabel(t,jQuery(this).val(),r,e,i);t.html(n)})}),jQuery(".gfield_option"+i).find("input:checked, select").each(function(){gformIsHidden(jQuery(this))||(t+=gformGetPrice(jQuery(this).val()))});var n,o=jQuery("#ginput_quantity_"+e+"_"+r);return o.length>0?n=gformIsNumber(o.val())?o.val():0:(quantityElement=jQuery(".gfield_quantity_"+e+"_"+r),n=1,quantityElement.find("input").length>0?n=quantityElement.find("input").val():quantityElement.find("select").length>0&&(n=quantityElement.find("select").val()),gformIsNumber(n)||(n=0)),n=parseFloat(n),n>0&&(_anyProductSelected=!0),t*=n,t=Math.round(100*t)/100}function gformGetBasePrice(e,r){var t="_"+e+"_"+r,i=0,n=jQuery("#ginput_base_price"+t+", .gfield_donation"+t+' input[type="text"], .gfield_product'+t+" .ginput_amount");if(n.length>0)i=n.val(),gformIsHidden(n)&&(i=0);else{n=jQuery(".gfield_product"+t+" select, .gfield_product"+t+" input:checked, .gfield_donation"+t+" select, .gfield_donation"+t+" input:checked");var o=n.val();o&&(o=o.split("|"),i=o.length>1?o[1]:0),gformIsHidden(n)&&(i=0)}var a=new Currency(gf_global.gf_currency_config);return i=a.toNumber(i),i===!1?0:i}function gformFormatMoney(e){if(!gf_global.gf_currency_config)return e;var r=new Currency(gf_global.gf_currency_config);return r.toMoney(e)}function gformFormatPricingField(e){if(gf_global.gf_currency_config){var r=new Currency(gf_global.gf_currency_config),t=r.toMoney(jQuery(e).val());jQuery(e).val(t)}}function gformToNumber(e){var r=new Currency(gf_global.gf_currency_config);return r.toNumber(e)}function gformGetPriceDifference(e,r){var t=parseFloat(r)-parseFloat(e);return price=gformFormatMoney(t),t>0&&(price="+"+price),price}function gformGetOptionLabel(e,r,t,i,n){e=jQuery(e);var o=gformGetPrice(r),a=e.attr("price"),l=e.html().replace(/<span(.*)<\/span>/i,"").replace(a,""),c=gformGetPriceDifference(t,o);c=0==gformToNumber(c)?"":" "+c,e.attr("price",c);var u="option"==e[0].tagName.toLowerCase()?" "+c:"<span class='ginput_price'>"+c+"</span>",f=l+u;return window.gform_format_option_label&&(f=gform_format_option_label(f,l,u,t,o,i,n)),f}function gformGetProductIds(e,r){for(var t=jQuery(r).hasClass(e)?jQuery(r).attr("class").split(" "):jQuery(r).parents("."+e).attr("class").split(" "),i=0;i<t.length;i++)if(t[i].substr(0,e.length)==e&&t[i]!=e)return{formId:t[i].split("_")[2],productFieldId:t[i].split("_")[3]};return{formId:0,fieldId:0}}function gformGetPrice(e){var r=e.split("|"),t=new Currency(gf_global.gf_currency_config);return r.length>1&&t.toNumber(r[1])!==!1?t.toNumber(r[1]):0}function gformRegisterPriceField(e){_gformPriceFields[e.formId]||(_gformPriceFields[e.formId]=new Array);for(var r=0;r<_gformPriceFields[e.formId].length;r++)if(_gformPriceFields[e.formId][r]==e.productFieldId)return;_gformPriceFields[e.formId].push(e.productFieldId)}function gformInitPriceFields(){jQuery(".gfield_price").each(function(){var e=gformGetProductIds("gfield_price",this);gformRegisterPriceField(e),jQuery(this).find('input[type="text"], input[type="number"], select').change(function(){var e=gformGetProductIds("gfield_price",this);0==e.formId&&(e=gformGetProductIds("gfield_shipping",this)),gformCalculateTotalPrice(e.formId)}),jQuery(this).find('input[type="radio"], input[type="checkbox"]').click(function(){var e=gformGetProductIds("gfield_price",this);0==e.formId&&(e=gformGetProductIds("gfield_shipping",this)),gformCalculateTotalPrice(e.formId)})});for(formId in _gformPriceFields)gformCalculateTotalPrice(formId)}function gformShowPasswordStrength(e){var r=jQuery("#"+e).val(),t=jQuery("#"+e+"_2").val(),i=gformPasswordStrength(r,t),n=window.gf_text["password_"+i];jQuery("#"+e+"_strength").val(i),jQuery("#"+e+"_strength_indicator").removeClass("blank mismatch short good bad strong").addClass(i).html(n)}function gformPasswordStrength(e,r){var t,i,n=0;return e.length<=0?"blank":e!=r&&r.length>0?"mismatch":e.length<4?"short":(e.match(/[0-9]/)&&(n+=10),e.match(/[a-z]/)&&(n+=26),e.match(/[A-Z]/)&&(n+=26),e.match(/[^a-zA-Z0-9]/)&&(n+=31),t=Math.log(Math.pow(n,e.length)),i=t/Math.LN2,40>i?"bad":56>i?"good":"strong")}function gformAddListItem(e,r){if(!jQuery(e).hasClass("gfield_icon_disabled")){var t=jQuery(e).parent().parent(),i=t.clone();i.find("input, select").val("").attr("tabindex",i.find("input:last").attr("tabindex")),t.after(i),gformToggleIcons(t.parent(),r),gformAdjustClasses(t.parent())}}function gformDeleteListItem(e,r){var t=jQuery(e).parent().parent(),i=t.parent();t.remove(),gformToggleIcons(i,r),gformAdjustClasses(i)}function gformAdjustClasses(e){for(var r=e.children(),t=0;t<r.length;t++){var i=0==(t+1)%2?"gfield_list_row_even":"gfield_list_row_odd";jQuery(r[t]).removeClass("gfield_list_row_odd").removeClass("gfield_list_row_even").addClass(i)}}function gformToggleIcons(e,r){var t=e.children().length;if(1==t?e.find(".delete_list_item").css("visibility","hidden"):e.find(".delete_list_item").css("visibility","visible"),r>0&&t>=r)gfield_original_title=e.find(".add_list_item:first").attr("title"),e.find(".add_list_item").addClass("gfield_icon_disabled").attr("title","");else{var i=e.find(".add_list_item");i.removeClass("gfield_icon_disabled"),gfield_original_title&&i.attr("title",gfield_original_title)}}function gformMatchCard(e){var r=gformFindCardType(jQuery("#"+e).val()),t=jQuery("#"+e).parents(".gfield").find(".gform_card_icon_container");r?(jQuery(t).find(".gform_card_icon").removeClass("gform_card_icon_selected").addClass("gform_card_icon_inactive"),jQuery(t).find(".gform_card_icon_"+r).removeClass("gform_card_icon_inactive").addClass("gform_card_icon_selected")):jQuery(t).find(".gform_card_icon").removeClass("gform_card_icon_selected gform_card_icon_inactive")}function gformFindCardType(e){if(e.length<4)return!1;var r=window.gf_cc_rules,t=new Array;for(type in r)for(i in r[type])if(0===r[type][i].indexOf(e.substring(0,r[type][i].length))){t[t.length]=type;break}return 1==t.length?t[0].toLowerCase():!1}function gformInitChosenFields(e,r){return jQuery(e).each(function(){var e=jQuery(this);e.is(":visible")&&0==e.siblings(".chzn-container").length&&jQuery(this).chosen({no_results_text:r})})}function gformFormatNumber(e,r,t,i){if("undefined"==typeof t)if(window.gf_global){var n=new Currency(gf_global.gf_currency_config);t=n.currency.decimal_separator}else t=".";if("undefined"==typeof i)if(window.gf_global){var n=new Currency(gf_global.gf_currency_config);i=n.currency.thousand_separator}else i=",";var n=new Currency;return n.numberFormat(e,r,t,i,!1)}function gformToNumber(e){var r=new Currency(gf_global.gf_currency_config);return r.toNumber(e)}function getMatchGroups(e,r){for(var t=new Array;r.test(e);){var i=t.length;t[i]=r.exec(e),e=e.replace(""+t[i][0],"")}return t}var originalPropMethod=jQuery.fn.prop;jQuery.fn.prop=function(){return"undefined"==typeof originalPropMethod?jQuery.fn.attr.apply(this,arguments):originalPropMethod.apply(this,arguments)},jQuery(document).ready(function(){jQuery(".ginput_amount, .ginput_donation_amount").bind("change",function(){gformFormatPricingField(this)}),jQuery(".ginput_amount, .ginput_donation_amount").each(function(){gformFormatPricingField(this)})});var _gformPriceFields=new Array,_anyProductSelected,gfield_original_title="",GFCalc=function(formId,formulaFields){this.patt=/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/i,this.exprPatt=/^[0-9 -/*\(\)]+$/i,this.isCalculating={},this.init=function(e,r){var t=this;jQuery(document).bind("gform_post_conditional_logic",function(){for(var i in r){var n=jQuery.extend({},r[i]);t.runCalc(n,e)}});for(var i in r){var n=jQuery.extend({},r[i]);this.runCalc(n,e),this.bindCalcEvents(n,e)}},this.runCalc=function(formulaField,formId){var calcObj=this,formulaInput,expr,field=jQuery("#field_"+formId+"_"+formulaField.field_id);formulaInput=jQuery("#input_"+formId+"_"+formulaField.field_id);var previous_val=formulaInput.val();if(expr=calcObj.replaceFieldTags(formId,formulaField.formula,formulaField.numberFormat),result="",calcObj.exprPatt.test(expr))try{result=eval(expr)}catch(e){}if(window.gform_calculation_result&&(result=window.gform_calculation_result(result,formulaField,formId)),field.hasClass("gfield_price"))result=gformFormatMoney(result?result:0);else{var decimalSeparator,thousandSeparator;"decimal_comma"==formulaField.numberFormat?(decimalSeparator=",",thousandSeparator="."):"decimal_dot"==formulaField.numberFormat&&(decimalSeparator=".",thousandSeparator=","),result=gformFormatNumber(result,gformIsNumber(formulaField.rounding)?formulaField.rounding:-1,decimalSeparator,thousandSeparator)}result!=previous_val&&(field.hasClass("gfield_price")?(formulaInput.text(result),jQuery("#ginput_base_price_"+formId+"_"+formulaField.field_id).val(result).trigger("change"),gformCalculateTotalPrice(formId)):formulaInput.val(result).trigger("change"))},this.bindCalcEvents=function(e,r){var t=this,n=e.field_id,o=getMatchGroups(e.formula,this.patt);t.isCalculating[n]=!1;for(i in o){var a=o[i][1],l=parseInt(a),c=jQuery("#field_"+r+"_"+l).find('input[name="input_'+a+'"], select[name="input_'+a+'"]');"checkbox"==c.prop("type")||"radio"==c.prop("type")?jQuery(c).click(function(){t.bindCalcEvent(a,e,r,0)}):c.is("select")||"hidden"==c.prop("type")?jQuery(c).change(function(){t.bindCalcEvent(a,e,r,0)}):jQuery(c).keydown(function(){t.bindCalcEvent(a,e,r)}).change(function(){t.bindCalcEvent(a,e,r,0)})}},this.bindCalcEvent=function(e,r,t,i){var n=this,o=r.field_id;i=void 0==i?345:i,n.isCalculating[o][e]&&clearTimeout(n.isCalculating[o][e]),n.isCalculating[o][e]=window.setTimeout(function(){n.runCalc(r,t)},i)},this.replaceFieldTags=function(e,r,t){var n=getMatchGroups(r,this.patt);for(i in n){var o=n[i][1],a=parseInt(o);n[i][3];var l=0,c=jQuery("#field_"+e+"_"+a).find('input[name="input_'+o+'"], select[name="input_'+o+'"]');(c.length>1||"checkbox"==c.prop("type"))&&(c=c.filter(":checked"));var u=window.gf_check_field_rule?"show"==gf_check_field_rule(e,a,!0,""):!0;if(c.length>0&&u){var f=c.val();f=f.split("|"),l=f.length>1?f[1]:c.val()}var d=".";if("decimal_comma"==t)d=",";else if("decimal_dot"==t)d=".";else if(window.gf_global){var s=new Currency(gf_global.gf_currency_config);d=s.currency.decimal_separator}l=gformCleanNumber(l,"","",d),l||(l=0),r=r.replace(n[i][0],l)}return r},this.init(formId,formulaFields)};