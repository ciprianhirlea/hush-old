!function(r){r.fn.textareaCount=function(a,n){function e(){return d.html(t()),"undefined"!=typeof n&&n.call(this,l()),!0}function t(){var r=h.val(),n=r.length;if(a.maxCharacterSize>0){n>=a.maxCharacterSize&&(r=r.substring(0,a.maxCharacterSize));var e=c(r),t=a.maxCharacterSize-e;if(u()||(t=a.maxCharacterSize),n>t){var l=this.scrollTop;h.val(r.substring(0,t)),this.scrollTop=l}d.removeClass(a.warningStyle),t-n<=a.warningNumber&&d.addClass(a.warningStyle),g=h.val().length+e,u()||(g=h.val().length),x=f(s(h.val())),m=p-g}else{var e=c(r);g=h.val().length+e,u()||(g=h.val().length),x=f(s(h.val()))}return i()}function i(){var r=a.displayFormat;return r=r.replace("#input",g),r=r.replace("#words",x),p>0&&(r=r.replace("#max",p),r=r.replace("#left",m)),r}function l(){var r={input:g,max:p,left:m,words:x};return r}function o(r){return r.next(".charleft")}function u(){var r=navigator.appVersion;return-1!=r.toLowerCase().indexOf("win")?!0:!1}function c(r){for(var a=0,n=0;n<r.length;n++)"\n"==r.charAt(n)&&a++;return a}function s(r){var a=r+" ",n=/^[^A-Za-z0-9]+/gi,e=a.replace(n,""),t=rExp=/[^A-Za-z0-9]+/gi,i=e.replace(t," "),l=i.split(" ");return l}function f(r){var a=r.length-1;return a}var v={maxCharacterSize:-1,originalStyle:"originalTextareaInfo",warningStyle:"warningTextareaInfo",warningNumber:20,displayFormat:"#input characters | #words words"},a=r.extend(v,a),h=r(this);r("<div class='charleft'>&nbsp;</div>").insertAfter(h),{width:h.width()};var d=o(h);d.addClass(a.originalStyle);var g=0,p=a.maxCharacterSize,m=0,x=0;h.bind("keyup",function(){e()}).bind("mouseover",function(){setTimeout(function(){e()},10)}).bind("paste",function(){setTimeout(function(){e()},10)}),e()}}(jQuery);